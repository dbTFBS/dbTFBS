window.parent!=window&&(window.parent.document.getElementById("loading").style.display="table-cell",window.parent.document.getElementById("homeIcon").className="fa-solid fa-file-contract");var col_header=["TF name","TF family"],titleAdd="TF name",repre_head=["dbTFBS","Forward","Reverse"],repre_tail=["Notes (Experiment)","Notes (Recovered Experiment)"],detail_header=["Accession id","Rank","Forward","Reverse"],note_header=["Co-occurrence","Notes"],skipClassArr=["Forward","Reverse"],titleObj=(Object.keys(meter).includes("set")||(meter.set=[]),{}),topTitleHome=(jQuery.ajax({url:"https://dbtfbs.trth.nl/"+passwdPathStr+"title.json",type:"GET",dataType:"text/plain",async:!1,complete:function(e){titleObj=JSON.parse(e.responseText)},error:function(){console.log("Unable to load title name (titleObj)")}}),document.getElementById("topTitle")),jsonUrl=(Object.keys(titleObj).includes("detail")&&(topTitleHome.innerHTML="",$.each(titleObj.detail,function(e,t){topTitleHome.innerText=e,window.parent!=window&&(window.parent.document.getElementById("subTitle").innerHTML="<b>"+e+"</b>")})),""),usageObj={},jsonUrl=(jsonUrl="https://dbtfbs.trth.nl/"+passwdPathStr+"unit/pwm-"+oprtr.id+".json",jQuery.ajax({url:jsonUrl,type:"GET",dataType:"json",async:!1,complete:function(e){usageObj=JSON.parse(e.responseText)},error:function(){document.createElement("errorSection").innerText="Unable to load converted database"}}),""),shortObj={};jsonUrl="https://dbtfbs.trth.nl/"+passwdPathStr+"related/shortForm.json",jQuery.ajax({url:jsonUrl,type:"GET",dataType:"json",async:!1,complete:function(e){shortObj=JSON.parse(e.responseText)},error:function(){document.createElement("errorSection").innerText="Unable to load shortform database"}});let tfTable=document.getElementById("tfTable"),pwmTable=(titleRow=document.createElement("tr"),relafRow=document.createElement("tr"),document.getElementById("pwmTable")),repTable=document.getElementById("repTable");Object.keys(usageObj).includes("#represent")||(document.getElementById("repSection").style.display="none");var represent_header=(represent_header=repre_head.concat(meter.set)).concat(repre_tail),source_header=(source_header=detail_header.concat(meter.set)).concat(note_header),skipClassArr=skipClassArr.concat(meter.set);if(document.getElementById("repInfo").colSpan=represent_header.length,document.getElementById("pwmInfo").colSpan=source_header.length,keyArr=Array.from(Object.keys(usageObj)),targetArr=new Array,Object.keys(usageObj).includes("#order"))targetArr=targetArr.concat(usageObj["#order"]);else{keyArr.sort();for(var ka=0;ka<keyArr.length;++ka)"#"!=keyArr[ka][0]&&targetArr.push(keyArr[ka])}if(Object.keys(usageObj).includes("#represent")){repTileRow=document.createElement("tr"),repInfoRow=document.createElement("tr");for(var ph=0;ph<represent_header.length;++ph)titleTd=document.createElement("th"),"Factorbook"==(titleStr=Object.keys(shortObj).includes(represent_header[ph])?shortObj[represent_header[ph]]:represent_header[ph])?titleTd.innerHTML=titleStr+"<br>Wang et al. (Genome Res. 2012)":"Kheradpour and Kellis"==titleStr?titleTd.innerHTML=titleStr+"<br>(Nucleic Acids Res. 2014)":titleTd.innerText=titleStr,repTileRow.appendChild(titleTd),infoTd=document.createElement("td"),Object(skipClassArr).includes(represent_header[ph])||(infoTd.className="geTd"),infoStr=usageObj["#represent"][represent_header[ph]],repre_tail.includes(represent_header[ph])?infoTd.innerHTML=infoStr.replace(/\, /g,",<br>"):infoTd.innerHTML=infoStr,repInfoRow.appendChild(infoTd);repTable.appendChild(repTileRow),repTable.appendChild(repInfoRow)}firstTime=!0;for(var ta=0;ta<targetArr.length;++ta){(rankArr=Array.from(Object.keys(usageObj[targetArr[ta]]))).sort();for(var ra=0;ra<rankArr.length;++ra){if(firstTime){for(var cl=0;cl<col_header.length;++cl)titleTd=document.createElement("th"),Object.keys(shortObj).includes(col_header[cl])?titleTd.innerHTML=shortObj[col_header[cl]]:titleTd.innerHTML=col_header[cl],titleRow.appendChild(titleTd),relafTd=document.createElement("td"),relaf=usageObj[targetArr[ta]][rankArr[ra]][col_header[cl]],relafTd.innerHTML=relaf,col_header[cl]==titleAdd&&(topTitleHome.innerText=topTitleHome.innerText+" of "+relafTd.innerText),relafRow.appendChild(relafTd);for(var sourceRow=document.createElement("tr"),sl=0;sl<source_header.length;++sl)titleTd=document.createElement("th"),"Factorbook"==(titleStr=Object.keys(shortObj).includes(source_header[sl])?shortObj[source_header[sl]]:source_header[sl])?titleTd.innerHTML=titleStr+"<br>Wang et al. (Genome Res. 2012)":"Kheradpour and Kellis"==titleStr?titleTd.innerHTML=titleStr+"<br>(Nucleic Acids Res. 2014)":titleTd.innerText=titleStr,sourceRow.appendChild(titleTd);pwmTable.appendChild(sourceRow),firstTime=!1}infoRow=document.createElement("tr");for(sl=0;sl<source_header.length;++sl)if(infoTd=document.createElement("td"),Object(skipClassArr).includes(source_header[sl])||(infoTd.className="geTd"),infoStr=usageObj[targetArr[ta]][rankArr[ra]][source_header[sl]],"Accession id"==source_header[sl])1<usageObj[targetArr[ta]][rankArr[ra]]["#rowspan"]?(infoTd.innerHTML=infoStr,infoTd.rowSpan=usageObj[targetArr[ta]][rankArr[ra]]["#rowspan"],infoRow.appendChild(infoTd)):1==usageObj[targetArr[ta]][rankArr[ra]]["#rowspan"]&&(infoTd.innerHTML=infoStr,infoRow.appendChild(infoTd));else{if("Co-occurrence"==source_header[sl]){let e=document.createElement("a");e.href='javascript:openmodal("'+targetArr[ta]+'","'+rankArr[ra]+'","'+usageObj[targetArr[ta]][rankArr[ra]]["Co-occurrence"]+'")',e.innerText=usageObj[targetArr[ta]][rankArr[ra]]["Co-occurrence"],infoTd.appendChild(e)}else infoTd.innerHTML=infoStr;infoRow.appendChild(infoTd)}pwmTable.appendChild(infoRow)}}tfTable.appendChild(titleRow),tfTable.appendChild(relafRow);var modal=document.getElementById("myModal"),memeTable=document.getElementById("memeTable"),popTh=document.getElementById("popTh"),span=document.getElementsByClassName("close")[0];function openmodal(e,t,r){memeTable.innerHTML=usageObj[e][t]["#cooccu"],popTh.innerText=r,modal.style.display="block"}function goTop(){window.location.href="#topAnchor"}span.onclick=function(){modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none")},$(function(){$(document).scroll(function(){$(".backButton").toggleClass("scrolled",45<$(this).scrollTop()||50<$(this).scrollLeft()),$(".topButton").toggleClass("scrolled",45<$(this).scrollTop())})});