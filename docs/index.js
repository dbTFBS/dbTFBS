var titleHome,sideHome,sideQuery,sideDownload,titleObj,jumpBool=!0,topTitleHome=document.getElementById("topTitle"),subTitleHome=document.getElementById("subTitle"),loadingDiv=document.getElementById("loading"),topBanner=document.getElementById("topBanner");function w3_open(){document.getElementById("myModal").style.display="block"}function w3_close(){"fa-solid fa-times"==document.getElementById("homeIcon").className&&(document.getElementById("homeIcon").className=document.getElementById("storeIcon").innerHTML,document.getElementById("homeName").innerHTML=document.getElementById("storeName").innerHTML),document.getElementById("myModal").style.display="none"}function w3_toggle(){"fa-solid fa-times"==document.getElementById("homeIcon").className?(document.getElementById("homeIcon").className=document.getElementById("storeIcon").innerHTML,document.getElementById("homeName").innerHTML=document.getElementById("storeName").innerHTML,document.getElementById("myModal").style.display="none"):(document.getElementById("storeIcon").innerHTML=document.getElementById("homeIcon").className,document.getElementById("homeIcon").className="fa-solid fa-times",document.getElementById("storeName").innerHTML=document.getElementById("homeName").innerHTML,document.getElementById("homeName").innerHTML="CLOSE",document.getElementById("myModal").style.display="block")}function removeAll(){document.getElementById("cartTable").innerHTML="",document.getElementById("cartList").style.display="none",document.getElementById("downloadAll").style.display="none",document.getElementById("floatDownloadButton").style.display="none",document.getElementById("removeAll").style.display="none"}function ifUnLoad(){loadingDiv.style.display="table-cell"}function reSize(){document.getElementById("myModal").style.height=window.innerHeight-topBanner.offsetHeight+"px",document.getElementById("myModal").style.top=topBanner.offsetHeight+"px",document.getElementById("hamburger").style.height=window.innerHeight-topBanner.offsetHeight+"px",document.getElementById("innerFrame").style.height=window.innerHeight-topBanner.offsetHeight+"px"}function ifOnLoad(){innerFrame=document.getElementById("innerFrame"),loadingDiv.style.display="none",postfixStr="home.html?ver="+passwdStr,"none"==oprtr.stop&&"about:blank"==innerFrame.src&&(ifUnLoad(),innerFrame.src=postfixStr),"none"!=oprtr.jump&&null!=innerFrame.contentDocument.getElementById(oprtr.jump+"_jump")&&jumpBool&&(targetUrlStr=innerFrame.contentDocument.getElementById(oprtr.jump+"_jump").href,""!=oprtr.pm&&(targetUrlStr=targetUrlStr+"&"+decodeURIComponent(oprtr.pm)),ifUnLoad(),innerFrame.src=targetUrlStr,jumpBool=!1),null!=innerFrame.contentDocument.getElementById("topTitle")&&(document.getElementById("topTitle").innerText=innerFrame.contentDocument.getElementById("topTitle").innerText),reSize()}function changeIframe(e){ifUnLoad(),document.getElementById("innerFrame").src=e}function backToHome(){return w3_close(),changeIframe("home.html?ver="+passwdStr),document.getElementById("humanButton").disabled=!1,document.getElementById("mouseButton").disabled=!1,passwdStr.includes("-hsa")?(document.getElementById("humanButton").disabled=!0,document.getElementById("humanIcon").className=""):passwdStr.includes("-mmu")&&(document.getElementById("mouseButton").disabled=!0,document.getElementById("mouseIcon").className=""),!1}function goToSearch(){return w3_close(),changeIframe("query.html?ver="+passwdStr),!1}function goToDownload(){return w3_close(),changeIframe("download.html?ver="+passwdStr),!1}function goToTips(){return w3_close(),changeIframe("help.html"),!1}function updateIndexDate(e){frontendDateStr="",jQuery.ajax({url:"https://dbtfbs.trth.nl/date.txt",type:"GET",dataType:"text/plain",async:!1,complete:function(e){frontendDateStr=e.responseText},error:function(){console.log("Unable to load framework date (frontendDateStr)"),console.log(frontendDateStr)}}),timeStamp=document.getElementById("frameTimeStamp"),""==frontendDateStr||frontendDateStr.includes("<!")||(timeStamp.innerHTML=fontawesome("fa-solid fa-file-code fa-fw")+" <b>Frontend (webpage): </b><br>"+leftIndent()+frontendDateStr.split("[UTC+8] ")[0]),dataDateStr="",jQuery.ajax({url:"https://dbtfbs.trth.nl/"+e+"date.txt",type:"GET",dataType:"text/plain",async:!1,complete:function(e){dataDateStr=e.responseText},error:function(){console.log("Unable to load database date (dataDateStr)"),console.log(dataDateStr)}}),timeStamp=document.getElementById("dataTimeStamp"),""==dataDateStr||dataDateStr.includes("<!")||(timeStamp.innerHTML=fontawesome("fa-solid fa-chart-pie fa-fw")+" <b>Data (db): </b><br>"+leftIndent()+dataDateStr.split("[UTC+8] ")[0]),backendDateStr="",jQuery.ajax({url:"https://dbtfbs.trth.nl/"+e+"structure.txt",type:"GET",dataType:"text/plain",async:!1,complete:function(e){backendDateStr=e.responseText},error:function(){console.log("Unable to load database date (backendDateStr)"),console.log(backendDateStr)}}),timeStamp=document.getElementById("backendTimeStamp"),""==backendDateStr||backendDateStr.includes("<!")||(timeStamp.innerHTML=fontawesome("fa-solid fa-server fa-fw")+" <b>Backend (db): </b><br>"+leftIndent()+backendDateStr.split("[UTC+8] ")[0])}function toggleMouse(){w3_close(),passwdStr.includes("-")?passwdStr=passwdStr.split("-")[0]+"-mmu":passwdStr+="-mmu",passwdPathStr=passwdStr.includes("/")?passwdStr:passwdStr+"/",changeIframe("home.html?ver="+passwdStr),document.getElementById("mouseButton").disabled=!0,document.getElementById("mouseIcon").className="filter-ful",document.getElementById("humanButton").disabled=!1,document.getElementById("humanIcon").className="filter-dim",updateIndexDate(passwdPathStr),removeAll()}function toggleHuman(){w3_close(),passwdStr.includes("-")?passwdStr=passwdStr.split("-")[0]+"-hsa":passwdStr+="-hsa",passwdPathStr=passwdStr.includes("/")?passwdStr:passwdStr+"/",changeIframe("home.html?ver="+passwdStr),document.getElementById("humanButton").disabled=!0,document.getElementById("humanIcon").className="filter-ful",document.getElementById("mouseButton").disabled=!1,document.getElementById("mouseIcon").className="filter-dim",updateIndexDate(passwdPathStr),removeAll()}""==passwdStr?(ifUnLoad(),document.getElementById("innerFrame").src="home.html"):(titleHome=document.getElementById("titleHome"),sideHome=document.getElementById("sideHome"),sideQuery=document.getElementById("sideQuery"),sideDownload=document.getElementById("sideDownload"),titleHome.href="javascript: void(backToHome())",sideHome.href="javascript: void(backToHome())",sideQuery.href="javascript: void(goToSearch())",sideDownload.href="javascript: void(goToDownload())",titleObj={},jQuery.ajax({url:"https://dbtfbs.trth.nl/"+passwdPathStr+"title.json",type:"GET",dataType:"text/plain",async:!1,complete:function(e){titleObj=JSON.parse(e.responseText)},error:function(){console.log("Unable to load title name")}}),titleEle=document.createElement("b"),subTitleEle=document.createElement("b"),Object.keys(titleObj).includes("index")&&(titleHome.innerHTML="",subTitleHome.innerHTML="",$.each(titleObj.index,function(e,t){topTitleHome.innerText=e,titleEle.innerText=e,subTitleEle.innerText="("+t+")"}),titleHome.appendChild(titleEle),subTitleHome.appendChild(subTitleEle)),updateIndexDate(passwdPathStr));var modal=document.getElementById("myModal");function toggleCart(){"inline-block"==document.getElementById("cartList").style.display?(document.getElementById("cartList").style.display="none",document.getElementById("floatDownloadButton").className="downloadButton",document.getElementById("floatDownloadButton").innerHTML=fontawesome("fa-solid fa-shopping-cart fa-fw")+" Cart list"):(document.getElementById("cartList").style.display="inline-block",document.getElementById("floatDownloadButton").className="downloadButtonUnhide",document.getElementById("floatDownloadButton").innerHTML=fontawesome("fa-solid fa-cart-arrow-down fa-fw")+" Hide Cart")}function removeCart(e){document.getElementById(e+"ctCell").remove(),cartTable=document.getElementById("cartTable"),carRows=cartTable.childNodes,cartArr=[];for(var t=0;t<carRows.length;++t)"TR"==carRows[t].nodeName&&cartArr.push(carRows[t].id);0<cartArr.length?document.getElementById("downloadAll").innerHTML=fontawesome("fa-solid fa-download fa-fw")+" Download ("+cartArr.length+")":removeAll()}window.onclick=function(e){e.target==modal&&w3_close()},passwdStr.includes("-hsa")?(document.getElementById("humanButton").disabled=!0,document.getElementById("humanIcon").className=""):passwdStr.includes("-mmu")&&(document.getElementById("mouseButton").disabled=!0,document.getElementById("mouseIcon").className="");var downloadObj={};function downloadAll(){downloadObj={},document.getElementById("downloadAll").className="offButton",document.getElementById("downloadAll").disabled=!0,ifUnLoad(),cartTable=document.getElementById("cartTable"),carRows=cartTable.childNodes,cartArr=[];for(var e=0;e<carRows.length;++e)"TR"==carRows[e].nodeName&&cartArr.push(carRows[e].id);headerObj={},jQuery.ajax({url:"https://dbtfbs.trth.nl/"+passwdPathStr+"meme/meme-_h.json",type:"GET",dataType:"text/plain",async:!1,complete:function(e){headerObj=JSON.parse(e.responseText)},error:function(){console.log("Unable to load meme obj (headerObj)")}}),headerStr=headerObj["#header"];for(var t=0;t<cartArr.length;++t)shortCA=cartArr[t].slice(0,2).toLowerCase(),Object.keys(downloadObj).includes(shortCA)||(headerObj={},jQuery.ajax({url:"https://dbtfbs.trth.nl/"+passwdPathStr+"meme/meme-"+shortCA+".json",type:"GET",dataType:"text/plain",async:!1,complete:function(e){headerObj=JSON.parse(e.responseText)},error:function(){console.log("Unable to load meme obj (headerObj)")}}),downloadObj[shortCA]=headerObj);targetMemeArr=Array();for(t=0;t<cartArr.length;++t)shortCA=cartArr[t].slice(0,2).toLowerCase(),headerCA=cartArr[t].replace(/ctCell/g,""),targetMemeArr.push(downloadObj[shortCA][headerCA]);text=headerStr+targetMemeArr.join("");var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(text)),n.setAttribute("download","Download.meme"),n.style.display="none",n.click(),ifOnLoad(),document.getElementById("downloadAll").className="button",document.getElementById("downloadAll").disabled=!1}document.getElementById("cartTable").innerHTML="",window.addEventListener("resize",reSize);